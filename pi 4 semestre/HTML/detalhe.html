<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="icon" href="../IMAGENS/logo(2).png">
    <link rel="stylesheet" href="../CSS/styles.css">
    <link rel="stylesheet" href="sweetalert2.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css"/>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.min.css"/>
</head>
<body class="backgroundHome">

    <nav class="navbarHome">
        <a class="navbarLogo" href="../HTML/home.html">
            <img src="../IMAGENS/logoBranco.png" alt="logo da página" width="100" height="100">
        </a>
        <div>
            <form class="d-flex" role="search">
                <input class="inputSearch" type="search" placeholder="Search" aria-label="Search">
                <img class="iconeLupa" src="../IMAGENS/lupa.png" alt="">
            </form>
        </div>

        <div class="carrinhoLogin">
            <!-- Redireciona para a página do carrinho ao clicar na imagem -->
            <a href="./carrinho.html"> <!-- Substitua 'carrinho.html' pelo caminho da sua página -->
                <img id="imgCarrinho" class="icones" src="../IMAGENS/carrinho.png" alt="">
                <span class="carrinho-notification" id="notification">1</span> <!-- Notificação -->
            </a>
            <img class="icones" src="../IMAGENS/user.png" alt="">
            <div class="user">
                <div class="container" style="">
                    <a href="">ENTRE </a>
                    <p>ou</p>
                    <a href="">CADASTRE-SE</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="product-container">
        <h1>Nome do produto</h1>
        <div class="product-content">
            <div class="product-images">
                <div id="carouselExample" class="carousel slide">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="../IMAGENS/imgUpload/bip.jpg" class="d-block w-100" alt="Imagem Principal">
                        </div>
                        <div class="carousel-item">
                            <img src="../IMAGENS/imgUpload/bip.jpg" class="d-block w-100" alt="Imagem 2">
                        </div>
                        <div class="carousel-item">
                            <img src="../IMAGENS/imgUpload/bip.jpg" class="d-block w-100" alt="Imagem 3">
                        </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
                <div class="carousel-preview">
                    <div class="preview-item" data-bs-target="#carouselExample" data-bs-slide-to="0">
                        <img src="../IMAGENS/imgUpload/bip.jpg" alt="Imagem Principal">
                    </div>
                    <div class="preview-item" data-bs-target="#carouselExample" data-bs-slide-to="1">
                        <img src="../IMAGENS/imgUpload/bip.jpg" alt="Imagem 2">
                    </div>
                    <div class="preview-item" data-bs-target="#carouselExample" data-bs-slide-to="2">
                        <img src="../IMAGENS/imgUpload/bip.jpg" alt="Imagem 3">
                    </div>
                </div>
            </div>
            <div class="price">
                <div class="star-rating">
                    <span class="star" data-value="1">★</span>
                    <span class="star" data-value="2">★</span>
                    <span class="star" data-value="3">★</span>
                    <span class="star" data-value="4">★</span>
                    <span class="star" data-value="5">★</span>
                </div>
                <span class="preco">R$ 119,99</span>
                <p>À VISTA NO PIX</p>
                
                <div class="shipping">
                    <label for="cep">Calcular frete e prazo de entrega:</label>
                    <input type="text" id="cep" name="cep" placeholder="Digite seu CEP" required>
                    <button class="ok-button" disabled>OK</button> <!-- Botão inicialmente desabilitado -->
                    <div class="total-valor">
                        <h4>Valor Total: <span id="valor-total">R$ 119,99</span></h4>
                        <div class="shipping-info">
                            <h4>Valor do Frete: <span id="valor-frete">R$ 0,00</span></h4>
                        </div>
                        <div class="quantity">
                            <label for="quantity">Quantidade:</label>
                            <input type="number" id="quantity" name="quantity" min="1" value="1">
                        </div>
                    </div>
                </div>
                <button class="buy-button" onclick="addToCart('Nome do Produto', 119.99)">COMPRAR</button>
                </div>
                

            </div>
        </div>
        <div class="description">
            <h4>DESCRIÇÃO DO PRODUTO</h4>
            <p>Descrição detalhada do produto aqui.</p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
    <script src="../js/lista_usuario.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>

    <script>
        function addToCart(name, price) {
            const quantity = parseInt(document.getElementById('quantity').value) || 1;

            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            const existingProductIndex = cart.findIndex(item => item.name === name);
            
            if (existingProductIndex > -1) {
                // Atualiza a quantidade e o total
                cart[existingProductIndex].quantity += quantity;
                cart[existingProductIndex].totalPrice += price * quantity;
            } else {
                // Adiciona o novo produto
                cart.push({ name, price, quantity, totalPrice: price * quantity });
            }
            
            localStorage.setItem('cart', JSON.stringify(cart));
            alert(`${quantity} unidades de ${name} adicionadas ao carrinho! Clique no ícone de carrinho para ver todos os itens e finalizar sua compra.`);
        }

        // Atualiza o valor total com base na quantidade
        document.getElementById('quantity').addEventListener('input', atualizarValorTotal);

        function atualizarValorTotal() {
            let valorUnitario = 119.99;
            let quantidade = parseInt(document.getElementById('quantity').value) || 0;
            let novoValor = valorUnitario * quantidade;

            document.getElementById('valor-total').innerText = 'R$ ' + novoValor.toFixed(2).replace('.', ',');
        }

        // Outros scripts para calcular o frete e funcionalidades adicionais...

    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            let freteAdicionado = false;
            let valorFrete = 0; // Variável para armazenar o valor do frete
    
            function addToCart(name, price) {
                const cep = document.getElementById('cep').value.trim();
                const quantity = parseInt(document.getElementById('quantity').value) || 1;
    
                if (!cep) {
                    alert("Por favor, insira seu CEP antes de adicionar o produto ao carrinho.");
                    return;
                }
    
                let cart = JSON.parse(localStorage.getItem('cart')) || [];
                const existingProductIndex = cart.findIndex(item => item.name === name);
                
                if (existingProductIndex > -1) {
                    cart[existingProductIndex].quantity += quantity;
                    cart[existingProductIndex].totalPrice += price * quantity;
                } else {
                    cart.push({ name, price, quantity, totalPrice: price * quantity });
                }
                
                localStorage.setItem('cart', JSON.stringify(cart));
                alert(`${quantity} unidades de ${name} adicionadas ao carrinho! Clique no ícone de carrinho para ver todos os itens e finalizar sua compra.`);
            }
    
            const cepInput = document.getElementById('cep');
            const okButton = document.querySelector('.ok-button');
    
            cepInput.addEventListener('input', function() {
                okButton.disabled = !this.value.trim();
            });
    
            okButton.addEventListener('click', function() {
                if (!freteAdicionado) {
                    valorFrete = calcularFrete(); // Armazena o valor do frete
                    atualizarValorTotalComFrete(valorFrete);
                    freteAdicionado = true;
                } else {
                    alert("O frete já foi adicionado!");
                }
            });
    
            function calcularFrete() {
                const freteValores = [5, 20, 50];
                const randomIndex = Math.floor(Math.random() * freteValores.length);
                const valor = freteValores[randomIndex];
                document.getElementById('valor-frete').innerText = 'R$ ' + valor.toFixed(2).replace('.', ','); // Atualiza o valor do frete exibido
                return valor; // Retorna o valor do frete escolhido
            }
    
            function atualizarValorTotalComFrete(frete) {
                let valorUnitario = 119.99;
                let quantidade = parseInt(document.getElementById('quantity').value) || 0;
                let novoValor = (valorUnitario * quantidade) + frete;
    
                document.getElementById('valor-total').innerText = 'R$ ' + novoValor.toFixed(2).replace('.', ',');
            }
    
            document.getElementById('quantity').addEventListener('input', atualizarValorTotal);
    
            function atualizarValorTotal() {
                let valorUnitario = 119.99;
                let quantidade = parseInt(document.getElementById('quantity').value) || 0;
                let novoValor = valorUnitario * quantidade;
    
                document.getElementById('valor-total').innerText = 'R$ ' + novoValor.toFixed(2).replace('.', ',');
            }
    
            const stars = document.querySelectorAll('.star');
            stars.forEach(star => {
                star.addEventListener('click', () => {
                    const rating = star.getAttribute('data-value');
                    stars.forEach(s => {
                        s.classList.remove('filled');
                    });
                    for (let i = 0; i < rating; i++) {
                        stars[i].classList.add('filled');
                    }
                });
            });
        });
    </script>
    